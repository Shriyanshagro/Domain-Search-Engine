<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>AnnoCPAN - Catalyst::Manual::Tutorial::AdvancedCRUD::FormFu</title>
    <meta name="description" content='AnnoCPAN is an "Annotated CPAN"; a site
    where users can add notes next to the POD documentation for Perl modules'>
    <meta name="keywords" content="cpan, perl, module, modules, documentation, annocpan">
    <link rel="stylesheet" type="text/css" href="/annocpan.css">
    
    <link rel="stylesheet" title="margin notes" type="text/css" href="/layout-side.css">
    <link rel="alternate stylesheet" title="inline notes" type="text/css" href="/layout-inline.css">
    
    
        
        <script src="/show.js" type="text/javascript"></script>
        
    
    <link rel="alternate" title="New CPAN Distributions" href="http://annocpan.org/recent_dists.rss" type="application/rss+xml">
    

    
</head>

<body>

<h1><a href="/"><img src="/img/annocpan.png" alt="Annotated CPAN" height="50" width="280"></a></h1>

<ul id="nav">
<li><a href="/">Home</a>
<li><a href="/about">About</a>
<li><a href="/faq">FAQ</a>
<li><a href="/news">News</a>

    <li class="right"><a href="/new_user">New user</a>

</ul>


<div id="content">









<div id="login_form">

<form action="./" method="post" class="float">
    <input type="hidden" name="mode" value="login">
    <input type="hidden" name="from" value="/~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod">
    <label for="login">login</label>
    <input type="text" name="user" id="login" class="text" size="8"><br>
    <label for="passwd">password</label>
    <input type="password" name="passwd" id="passwd" size="8" class="text">
    <input type="submit" value="login">
</form>

</div>

<form id="searchform" action="/" method="get">
    <input type="hidden" name="mode" value="search" />
    <label for="name">Go to</label>
    <select name="field" class="field">
        
        <option >Module</option>
        
        <option >Distribution</option>
        
        <option >Author</option>
        
    </select>
    <input type="text" name="name" id="name" class="text" value=""/>
    <input type="submit" />
</form>


<h2>
<a href="/~HKCLARK">HKCLARK</a>
&gt;
    <a href="/~HKCLARK/Catalyst-Manual-5.7021">Catalyst-Manual-5.7021</a> 
&gt; 
    <a href="/pod/Catalyst::Manual::Tutorial::AdvancedCRUD::FormFu">Catalyst::Manual::Tutorial::AdvancedCRUD::FormFu</a>
</h2>

<p id="podsisters" class="sisters">[    <a href="http://search.cpan.org/~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod">search.cpan.org</a> |
    <a href="http://cpan.uwinnipeg.ca/htdocs/Catalyst-Manual/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.html">Kobes search</a> |
    <a href="http://rt.cpan.org/NoAuth/Bugs.html?Dist=Catalyst-Manual" title="report a bug for Catalyst-Manual in the perl.org request tracking system">report a bug</a> 
]
<br>
</p>



<div id="pod2html">



<p class="firstnote">(6 notes; <a href="#note_2145" title="First note">[first note]</a>)</p>







    <h3><a name="name"></a>NAME

</h3>








    <div class="para">
    <a name="2"></a>
    <div class="content"><p>Catalyst::Manual::Tutorial::AdvancedCRUD::FormFu - Catalyst Tutorial - Chapter 9: Advanced CRUD - FormFu

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452103#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#2" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h3><a name="overview"></a>OVERVIEW

</h3>








    <div class="para">
    <a name="5"></a>
    <div class="content"><p>This is <b>Chapter 9 of 10</b> for the Catalyst tutorial.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452105#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#5" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="6"></a>
    <div class="content"><p><a href="/perldoc?Catalyst::Manual::Tutorial">Tutorial Overview</a>

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452106#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#6" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <ul>








    <li><b>1

</b>








    <div class="para">
    <a name="9"></a>
    <div class="content"><p><a href="/perldoc?Catalyst::Manual::Tutorial::Intro">Introduction</a>

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452109#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#9" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li><b>2

</b>








    <div class="para">
    <a name="11"></a>
    <div class="content"><p><a href="/perldoc?Catalyst::Manual::Tutorial::CatalystBasics">Catalyst Basics</a>

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452111#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#11" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li><b>3

</b>








    <div class="para">
    <a name="13"></a>
    <div class="content"><p><a href="/perldoc?Catalyst::Manual::Tutorial::MoreCatalystBasics">More Catalyst Basics</a>

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452113#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#13" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li><b>4

</b>








    <div class="para">
    <a name="15"></a>
    <div class="content"><p><a href="/perldoc?Catalyst::Manual::Tutorial::BasicCRUD">Basic CRUD</a>

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452115#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#15" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li><b>5

</b>








    <div class="para">
    <a name="17"></a>
    <div class="content"><p><a href="/perldoc?Catalyst::Manual::Tutorial::Authentication">Authentication</a>

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452117#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#17" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li><b>6

</b>








    <div class="para">
    <a name="19"></a>
    <div class="content"><p><a href="/perldoc?Catalyst::Manual::Tutorial::Authorization">Authorization</a>

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452119#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#19" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li><b>7

</b>








    <div class="para">
    <a name="21"></a>
    <div class="content"><p><a href="/perldoc?Catalyst::Manual::Tutorial::Debugging">Debugging</a>

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452121#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#21" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li><b>8

</b>








    <div class="para">
    <a name="23"></a>
    <div class="content"><p><a href="/perldoc?Catalyst::Manual::Tutorial::Testing">Testing</a>

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452123#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#23" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li><b>9

</b>








    <div class="para">
    <a name="25"></a>
    <div class="content"><p><b>Advanced CRUD::FormFu</b>

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452125#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#25" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li><b>10

</b>








    <div class="para">
    <a name="27"></a>
    <div class="content"><p><a href="/perldoc?Catalyst::Manual::Tutorial::Appendices">Appendices</a>

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452127#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#27" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    </ul>








    <h3><a name="description"></a>DESCRIPTION

</h3>








    <div class="para">
    <a name="31"></a>
    <div class="content"><p>This portion of the tutorial explores <a href="/perldoc?HTML::FormFu">HTML::FormFu</a> and 
how it can be used to manage forms, perform validation of form input, 
as well as save and restore data to/from the database.  This was written
using HTML::FormFu version 0.03007.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452130#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#31" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="32"></a>
    <div class="content"><p>See 
<a href="/perldoc?Catalyst::Manual::Tutorial::AdvancedCRUD">Catalyst::Manual::Tutorial::AdvancedCRUD</a>
for additional form management options other than 
<a href="/perldoc?HTML::FormFu">HTML::FormFu</a>.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452131#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#32" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h3><a name="install_html%3a%3aformfu"></a>Install HTML::FormFu

</h3>








    <div class="para">
    <a name="35"></a>
    <div class="content"><p>If you are following along in Debian 5, it turns out that some of the 
modules we need are not yet available as Debian packages at the time 
this was written.  To install it with a combination of Debian packages 
and traditional CPAN modules, first use <code>aptitude</code> to install most of 
the modules:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452133#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#35" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="36"></a>
    <div class="content"><p>we need to install the
<a href="/perldoc?HTML::FormFu">HTML::FormFu</a> package: 

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452134#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#36" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="37"></a>
    <div class="content"><div><pre>    sudo aptitude -y install libhtml-formfu-perl libmoose-perl \
        libregexp-assemble-perl libhtml-formfu-model-dbic-perl
        
    ...
    
    sudo aptitude clean

</pre>
</div></div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452135#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#37" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="40"></a>
    <div class="content"><p>Then use the following command to install directly from CPAN the modules 
that aren't available as Debian packages:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452136#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#40" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="41"></a>
    <div class="content"><div><pre>    sudo cpan Catalyst::Component::InstancePerContext Catalyst::Controll
<span class="line_cont">+</span>er::HTML::FormFu

</pre>
</div></div>


    <div class="noteblock">
    
         
        
            




<div class="note sim_60" id="note_2145">
<div class="note_header">
    <div class="note_data">
        <a href="/user/jarich">jarich</a> 
    (2008-11-27 13:19:57)
    <a class="button u_566" href="/e/?mode=edit;notepos=32432#noteform">[edit]</a>
    <a class="button u_566" href="/e/?mode=move;notepos=32432#41">[move]</a>
    </div>
    <div class="note_nav">
    
    <a href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#note_2145" title="Bookmarkable link to this note">§</a>
    <a href="#note_2149" title="Next note">»</a>
    </div>
</div> <!-- note_header -->
<div class="note_body">
        
    <p>If only it was this easy...  I found the installation of this module even with these hints on Debian Etch to be massively painful.  This has been the most painful module install for this machine ever.</p>

</div>
</div> <!-- note -->



        
    

    
        <a href="/e/?mode=create;section=25452137#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#41" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h3><a name="html%3a%3aformfu_form_creation"></a>HTML::FormFu FORM CREATION

</h3>








    <div class="para">
    <a name="44"></a>
    <div class="content"><p>This section looks at how <a href="/perldoc?HTML::FormFu">HTML::FormFu</a> can be used to 
add additional functionality to the manually created form from Chapter 4.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452139#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#44" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h4><a name="inherit_from_catalyst%3a%3acontroller%3a%3ahtml%3a%3aformfu"></a>Inherit From Catalyst::Controller::HTML::FormFu

</h4>








    <div class="para">
    <a name="47"></a>
    <div class="content"><p>First, change your <code>lib/MyApp/Controller/Books.pm</code> to inherit from
<a href="/perldoc?Catalyst::Controller::HTML::FormFu">Catalyst::Controller::HTML::FormFu</a>
by changing the <code>use parent</code> line from the default of:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452141#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#47" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="48"></a>
    <div class="content"><div><pre>    use parent 'Catalyst::Controller';

</pre>
</div></div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452142#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#48" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="49"></a>
    <div class="content"><p>to use the FormFu base controller class:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452143#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#49" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="50"></a>
    <div class="content"><div><pre>    use parent 'Catalyst::Controller::HTML::FormFu';

</pre>
</div></div>


    <div class="noteblock">
    
         
        
            




<div class="note sim_90" id="note_2149">
<div class="note_header">
    <div class="note_data">
        <a href="/user/jarich">jarich</a> 
    (2008-11-29 05:51:41)
    <a class="button u_566" href="/e/?mode=edit;notepos=32436#noteform">[edit]</a>
    <a class="button u_566" href="/e/?mode=move;notepos=32436#50">[move]</a>
    </div>
    <div class="note_nav">
    <a href="#note_2145" title="Previous note">«</a>
    <a href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#note_2149" title="Bookmarkable link to this note">§</a>
    <a href="#note_2146" title="Next note">»</a>
    </div>
</div> <!-- note_header -->
<div class="note_body">
        
    <p>Depending on your version of Catalyst, this might be:</p>
<pre>   use parent 'Catalyst::Controller';</pre>
<p>in which case just change it to:</p>
<pre>   use parent 'Catalyst::Controller::HTML::FormFu';</pre>

</div>
</div> <!-- note -->



        
    

    
        <a href="/e/?mode=create;section=25452144#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#50" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h4><a name="add_action_to_display_and_save_the_form"></a>Add Action to Display and Save the Form

</h4>








    <div class="para">
    <a name="53"></a>
    <div class="content"><p>Open <code>lib/MyApp/Controller/Books.pm</code> in your editor and add the
following method:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452146#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#53" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="54"></a>
    <div class="content"><div><pre>    =head2 formfu_create
    
    Use HTML::FormFu to create a new book
    
    =cut
    
    sub formfu_create :Chained('base') :PathPart('formfu_create') :Args(
<span class="line_cont">+</span>0) :FormConfig {
        my ($self, $c) = @_;
    
        # Get the form that the :FormConfig attribute saved in the stash
        my $form = $c-&gt;stash-&gt;{form};
  
        # Check if the form has been submitted (vs. displaying the initi
<span class="line_cont">+</span>al
        # form) and if the data passed validation.  "submitted_and_valid
<span class="line_cont">+</span>"
        # is shorthand for "$form-&gt;submitted &amp;&amp; !$form-&gt;has_errors"
        if ($form-&gt;submitted_and_valid) {
            # Create a new book
            my $book = $c-&gt;model('DB::Books')-&gt;new_result({});
            # Save the form data for the book
            $form-&gt;model-&gt;update($book);
            # Set a status message for the user
            $c-&gt;flash-&gt;{status_msg} = 'Book created';
            # Return to the books list
            $c-&gt;response-&gt;redirect($c-&gt;uri_for($self-&gt;action_for('list')
<span class="line_cont">+</span>)); 
            $c-&gt;detach;
        } else {
            # Get the authors from the DB
            my @author_objs = $c-&gt;model("DB::Authors")-&gt;all();
            # Create an array of arrayrefs where each arrayref is an aut
<span class="line_cont">+</span>hor
            my @authors;
            foreach (sort {$a-&gt;last_name cmp $b-&gt;last_name} @author_objs
<span class="line_cont">+</span>) {
                push(@authors, [$_-&gt;id, $_-&gt;last_name]);
            }
            # Get the select added by the config file
            my $select = $form-&gt;get_element({type =&gt; 'Select'});
            # Add the authors to it
            $select-&gt;options(\@authors);
        }
        
        # Set the template
        $c-&gt;stash-&gt;{template} = 'books/formfu_create.tt2';
    }

</pre>
</div></div>


    <div class="noteblock">
    
         
        
            




<div class="note sim_90" id="note_2146">
<div class="note_header">
    <div class="note_data">
        <a href="/user/jarich">jarich</a> 
    (2008-11-27 13:21:02)
    <a class="button u_566" href="/e/?mode=edit;notepos=32433#noteform">[edit]</a>
    <a class="button u_566" href="/e/?mode=move;notepos=32433#54">[move]</a>
    </div>
    <div class="note_nav">
    <a href="#note_2149" title="Previous note">«</a>
    <a href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#note_2146" title="Bookmarkable link to this note">§</a>
    <a href="#note_2155" title="Next note">»</a>
    </div>
</div> <!-- note_header -->
<div class="note_body">
        
    <p>In older version of the tutorial the model was called as follows:</p>
<pre>  $c-&gt;model('MyAppDB::Books')</pre>
<p>You may need adjust this line in here and in later examples if that's what you've been doing.</p>

</div>
</div> <!-- note -->



        
    
         
        
            




<div class="note sim_90" id="note_2155">
<div class="note_header">
    <div class="note_data">
        <a href="/user/jarich">jarich</a> 
    (2008-11-29 07:19:44)
    <a class="button u_566" href="/e/?mode=edit;notepos=32437#noteform">[edit]</a>
    <a class="button u_566" href="/e/?mode=move;notepos=32437#54">[move]</a>
    </div>
    <div class="note_nav">
    <a href="#note_2146" title="Previous note">«</a>
    <a href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#note_2155" title="Bookmarkable link to this note">§</a>
    <a href="#note_2147" title="Next note">»</a>
    </div>
</div> <!-- note_header -->
<div class="note_body">
        
    <p>Note.  <code>save_to_model()</code> method is not deprecated and is provided for compatibility  only, and will be removed: use $form-&gt;model-&gt;update() instead.</p>

</div>
</div> <!-- note -->



        
    

    
        <a href="/e/?mode=create;section=25452147#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#54" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h4><a name="create_a_form_config_file"></a>Create a Form Config File

</h4>








    <div class="para">
    <a name="63"></a>
    <div class="content"><p>Although <code>HTML::FormFu</code> supports any configuration file handled by
<a href="/perldoc?Config::Any">Config::Any</a>, most people tend to use YAML.  First
create a directory to hold your form configuration files:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452149#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#63" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="64"></a>
    <div class="content"><div><pre>    mkdir -p root/forms/books

</pre>
</div></div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452150#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#64" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="65"></a>
    <div class="content"><p>Then create the file <code>root/forms/books/formfu_create.yml</code> and enter the 
following text:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452151#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#65" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="66"></a>
    <div class="content"><div><pre>    ---
    # indicator is the field that is used to test for form submission
    indicator: submit
    # Start listing the form elements
    elements:
        # The first element will be a text field for the title
        - type: Text
          name: title
          label: Title
          # This is an optional 'mouse over' title pop-up
          attributes:
            title: Enter a book title here
    
        # Another text field for the numeric rating
        - type: Text
          name: rating
          label: Rating
          attributes:
            title: Enter a rating between 1 and 5 here
    
        # Add a drop-down list for the author selection.  Note that we w
<span class="line_cont">+</span>ill
        # dynamically fill in all the authors from the controller but we
        # could manually set items in the drop-list by adding this YAML 
<span class="line_cont">+</span>code:
        # options:
        #   - [ '1', 'Bastien' ]
        #   - [ '2', 'Nasseh'  ]
        - type: Select
          name: authors
          label: Author
    
        # The submit button
        - type: Submit
          name: submit
          value: Submit

</pre>
</div></div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452152#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#66" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="70"></a>
    <div class="content"><p><b>NOTE:</b> Copying and pasting YAML from perl documentation is sometimes
tricky.  See the <a href="#config%3a%3ageneral_config_for_this_tutorial">"Config::General Config for this tutorial"</a> section of
this document for a more foolproof config format.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452153#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#70" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h4><a name="update_the_css"></a>Update the CSS

</h4>








    <div class="para">
    <a name="73"></a>
    <div class="content"><p>Edit <code>root/static/css/main.css</code> and add the following lines to the bottom of
the file:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452155#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#73" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="74"></a>
    <div class="content"><div><pre>    ...
    input {
        display: block;
    }
    select {
        display: block;
    }
    .submit {
        padding-top: .5em;
        display: block;
    }

</pre>
</div></div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452156#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#74" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="75"></a>
    <div class="content"><p>These changes will display form elements vertically.  Note that the 
existing definition of the <code>.error</code> class is pulling the color scheme 
settings from the <code>root/lib/config/col</code> file that was created by the 
TTSite helper.  This allows control over the CSS color settings from a 
single location.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452157#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#75" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h4><a name="create_a_template_page_to_display_the_form"></a>Create a Template Page To Display The Form

</h4>








    <div class="para">
    <a name="78"></a>
    <div class="content"><p>Open <code>root/src/books/formfu_create.tt2</code> in your editor and enter the following:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452159#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#78" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="79"></a>
    <div class="content"><div><pre>    [% META title = 'Create/Update Book' %]
    
    [%# Render the HTML::FormFu Form %]
    [% form %]
    
    &lt;p&gt;&lt;a href="[% c.uri_for(c.controller.action_for('list')) %]"&gt;Return
<span class="line_cont">+</span> to book list&lt;/a&gt;&lt;/p&gt;

</pre>
</div></div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452160#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#79" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h4><a name="add_links_for_create_and_update_via_html%3a%3aformfu"></a>Add Links for Create and Update via <code>HTML::FormFu</code>

</h4>








    <div class="para">
    <a name="84"></a>
    <div class="content"><p>Open <code>root/src/books/list.tt2</code> in your editor and add the following to
the bottom of the existing file:

</p>
</div>


    <div class="noteblock">
    
         
        
            




<div class="note sim_100" id="note_2147">
<div class="note_header">
    <div class="note_data">
        <a href="/user/jarich">jarich</a> 
    (2008-11-27 13:22:01)
    <a class="button u_566" href="/e/?mode=edit;notepos=32434#noteform">[edit]</a>
    <a class="button u_566" href="/e/?mode=move;notepos=32434#84">[move]</a>
    </div>
    <div class="note_nav">
    <a href="#note_2155" title="Previous note">«</a>
    <a href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#note_2147" title="Bookmarkable link to this note">§</a>
    <a href="#note_2148" title="Next note">»</a>
    </div>
</div> <!-- note_header -->
<div class="note_body">
        
    <p>Despite the title for this section, this is only about adding the create link.  The Update/Edit links are added in a later section below validation and filtering.</p>

</div>
</div> <!-- note -->



        
    

    
        <a href="/e/?mode=create;section=25452162#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#84" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="85"></a>
    <div class="content"><div><pre>    ...
    &lt;p&gt;
      HTML::FormFu:
      &lt;a href="[% c.uri_for(c.controller.action_for('formfu_create')) %]
<span class="line_cont">+</span>"&gt;Create&lt;/a&gt;
    &lt;/p&gt;

</pre>
</div></div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452163#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#85" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="86"></a>
    <div class="content"><p>This adds a new link to the bottom of the book list page that we can
use to easily launch our HTML::FormFu-based form.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452164#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#86" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h4><a name="test_the_html%3a%3aformfu_create_form"></a>Test The HTML::FormFu Create Form

</h4>








    <div class="para">
    <a name="89"></a>
    <div class="content"><p>Press <code>Ctrl-C</code> to kill the previous server instance (if it's still
running) and restart it:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452166#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#89" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="90"></a>
    <div class="content"><div><pre>    $ script/myapp_server.pl

</pre>
</div></div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452167#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#90" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="91"></a>
    <div class="content"><p>Login as <code>test01</code> (password: mypass).  Once at the Book List page,
click the new HTML::FormFu "Create" link at the bottom to display the
form.  Fill in the following values: Title = "Internetworking with
TCP/IP Vol. II", Rating = "4", and Author = "Comer".  Click Submit,
and you will be returned to the Book List page with a "Book created"
status message displayed.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452168#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#91" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="92"></a>
    <div class="content"><p>Also note that this implementation allows you to can create books with 
bogus information.  Although we have constrained the authors with the 
drop-down list (note that this isn't bulletproof because we still have 
not prevented a user from "hacking" the form to specify other values), 
there are no restrictions on items such as the length of the title (for 
example, you can create a one-letter title) and value for the rating 
(you can use any number you want, and even non-numeric values with 
SQLite).  The next section will address this concern.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452169#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#92" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="93"></a>
    <div class="content"><p><b>Note:</b> Depending on the database you are using and how you established
the columns in your tables, the database could obviously provide various
levels of "type enforcement" on your data.  The key point being made in
the previous paragraph is that the <i>web application</i> itself is not
performing any validation.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452170#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#93" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h3><a name="html%3a%3aformfu_validation_and_filtering"></a>HTML::FormFu VALIDATION AND FILTERING

</h3>








    <div class="para">
    <a name="96"></a>
    <div class="content"><p>Although the use of <a href="/perldoc?HTML::FormFu">HTML::FormFu</a> in the previous section 
did provide an automated mechanism to build the form, the real power of 
this module stems from functionality that can automatically validate and 
filter the user input.  Validation uses constraints to be sure that 
users input appropriate data (for example, that the email field of a 
form contains a valid email address).  Filtering can also be used to 
remove extraneous whitespace from fields or to escape meta-characters in 
user input.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452172#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#96" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h4><a name="add_constraints"></a>Add Constraints

</h4>








    <div class="para">
    <a name="99"></a>
    <div class="content"><p>Open <code>root/forms/books/formfu_create.yml</code> in your editor and update it 
to match:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452174#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#99" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="100"></a>
    <div class="content"><div><pre>    ---
    # indicator is the field that is used to test for form submission
    indicator: submit
    # Start listing the form elements
    elements:
        # The first element will be a text field for the title
        - type: Text
          name: title
          label: Title
          # This is an optional 'mouse over' title pop-up
          attributes:
            title: Enter a book title here
          # Add constraints for the field
          constraints:
            # Force the length to be between 5 and 40 chars
            - type: Length
              min: 5
              max: 40
              # Override the default of 'Invalid input'
              message: Length must be between 5 and 40 characters
    
        # Another text field for the numeric rating
        - type: Text
          name: rating
          label: Rating
          attributes:
            title: Enter a rating between 1 and 5 here
          # Use Filter to clean up the input data
          # Could use 'NonNumeric' below, but since Filters apply *befor
<span class="line_cont">+</span>e*
          # constraints, it would conflict with the 'Integer' constraint
<span class="line_cont">+</span> below.
          # So let's skip this and just use the constraint.
          #filter:
            # Remove everything except digits
            #- NonNumeric
          # Add constraints to the field
          constraints:
            # Make sure it's a number
            - type: Integer
              message: "Required. Digits only, please."
            # Check the min &amp; max values
            - type: Range
              min: 1
              max: 5
              message: "Must be between 1 and 5."
    
        # Add a select list for the author selection.  Note that we will
        # dynamically fill in all the authors from the controller but we
        # could manually set items in the select by adding this YAML cod
<span class="line_cont">+</span>e:
        # options:
        #   - [ '1', 'Bastien' ]
        #   - [ '2', 'Nasseh'  ]
        - type: Select
          name: authors
          label: Author
          # Convert the drop-down to a multi-select list
          multiple: 1
          # Display 3 entries (user can scroll to see others)
          size: 3
          # One could argue we don't need to do filters or constraints f
<span class="line_cont">+</span>or
          # a select list, but it's smart to do validation and sanity
          # checks on this data in case a user "hacks" the input
          # Add constraints to the field
          constraints:
            # Make sure it's a number
            - Integer
    
        # The submit button
        - type: Submit
          name: submit
          value: Submit
    
    # Global filters and constraints.
    constraints:
      # The user cannot leave any fields blank
      - Required
      # If not all fields are required, move the Required constraint to 
<span class="line_cont">+</span>the 
      # fields that are
    filter:
      # Remove whitespace at both ends
      - TrimEdges
      # Escape HTML characters for safety
      - HTMLEscape

</pre>
</div></div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452175#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#100" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="105"></a>
    <div class="content"><p><b>NOTE:</b> Copying and pasting YAML from perl documentation is sometimes
tricky.  See the <a href="#config%3a%3ageneral_config_for_this_tutorial">"Config::General Config for this tutorial"</a> section of
this document for a more foolproof config format.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452176#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#105" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="106"></a>
    <div class="content"><p>The main changes are:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452177#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#106" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <ul>








    <li class="star">







    <div class="para">
    <a name="109"></a>
    <div class="content"><p>The <code>Select</code> element for <code>authors</code> is changed from a single-select
drop-down to a multi-select list by adding configuration for the 
<code>multiple</code> and <code>size</code> options in <code>formfu_create.yml</code>.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452180#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#109" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li class="star">







    <div class="para">
    <a name="111"></a>
    <div class="content"><p>Constraints are added to provide validation of the user input.  See
<a href="/perldoc?HTML::FormFu::Constraint">HTML::FormFu::Constraint</a> for other
constraints that are available.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452182#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#111" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li class="star">







    <div class="para">
    <a name="113"></a>
    <div class="content"><p>A variety of filters are run on every field to remove and escape 
unwanted input.  See <a href="/perldoc?HTML::FormFu::Filter">HTML::FormFu::Filter</a>
for more filter options.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452184#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#113" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    </ul>








    <h4><a name="try_out_the_updated_form"></a>Try Out the Updated Form

</h4>








    <div class="para">
    <a name="117"></a>
    <div class="content"><p>Press <code>Ctrl-C</code> to kill the previous server instance (if it's still 
running) and restart it:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452187#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#117" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="118"></a>
    <div class="content"><div><pre>    $ script/myapp_server.pl

</pre>
</div></div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452188#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#118" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="119"></a>
    <div class="content"><p>Make sure you are still logged in as <code>test01</code> and try adding a book 
with various errors: title less than 5 characters, non-numeric rating, a 
rating of 0 or 6, etc.  Also try selecting one, two, and zero authors. 
When you click Submit, the HTML::FormFu <code>constraint</code> items will 
validate the logic and insert feedback as appropriate.  Try adding blank 
spaces at the front or the back of the title and note that it will be 
removed.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452189#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#119" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h3><a name="create_and_update%2fedit_action"></a>CREATE AND UPDATE/EDIT ACTION

</h3>








    <div class="para">
    <a name="122"></a>
    <div class="content"><p>Let's expand the work done above to add an edit action.  First, open 
<code>lib/MyApp/Controller/Books.pm</code> and add the following method to the 
bottom:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452191#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#122" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="123"></a>
    <div class="content"><div><pre>    =head2 formfu_edit
    
    Use HTML::FormFu to update an existing book
    
    =cut
    
    sub formfu_edit :Chained('object') :PathPart('formfu_edit') :Args(0)
<span class="line_cont">+</span> 
            :FormConfig('books/formfu_create.yml') {
        my ($self, $c) = @_;
    
        # Get the specified book already saved by the 'object' method
        my $book = $c-&gt;stash-&gt;{object};
    
        # Make sure we were able to get a book
        unless ($book) {
            $c-&gt;flash-&gt;{error_msg} = "Invalid book -- Cannot edit";
            $c-&gt;response-&gt;redirect($c-&gt;uri_for($self-&gt;action_for('list')
<span class="line_cont">+</span>));
            $c-&gt;detach;
        }
    
        # Get the form that the :FormConfig attribute saved in the stash
        my $form = $c-&gt;stash-&gt;{form};
    
        # Check if the form has been submitted (vs. displaying the initi
<span class="line_cont">+</span>al
        # form) and if the data passed validation.  "submitted_and_valid
<span class="line_cont">+</span>"
        # is shorthand for "$form-&gt;submitted &amp;&amp; !$form-&gt;has_errors"
        if ($form-&gt;submitted_and_valid) {
            # Save the form data for the book
            $form-&gt;model-&gt;update($book);
            # Set a status message for the user
            $c-&gt;flash-&gt;{status_msg} = 'Book edited';
            # Return to the books list
            $c-&gt;response-&gt;redirect($c-&gt;uri_for($self-&gt;action_for('list')
<span class="line_cont">+</span>));
            $c-&gt;detach;
        } else {
            # Get the authors from the DB
            my @author_objs = $c-&gt;model("DB::Authors")-&gt;all();
            # Create an array of arrayrefs where each arrayref is an aut
<span class="line_cont">+</span>hor
            my @authors;
            foreach (sort {$a-&gt;last_name cmp $b-&gt;last_name} @author_objs
<span class="line_cont">+</span>) {
                push(@authors, [$_-&gt;id, $_-&gt;last_name]);
            }
            # Get the select added by the config file
            my $select = $form-&gt;get_element({type =&gt; 'Select'});
            # Add the authors to it
            $select-&gt;options(\@authors);
            # Populate the form with existing values from DB
            $form-&gt;model-&gt;default_values($book);
        }
    
        # Set the template
        $c-&gt;stash-&gt;{template} = 'books/formfu_create.tt2';
    }

</pre>
</div></div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452192#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#123" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="132"></a>
    <div class="content"><p>Most of this code should look familiar to what we used in the 
<code>formfu_create</code> method (in fact, we should probably centralize some of 
the common code in separate methods).  The main differences are:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452193#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#132" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <ul>








    <li class="star">







    <div class="para">
    <a name="135"></a>
    <div class="content"><p>We have to manually specify the name of the FormFu .yml file as an 
argument to <code>:FormConfig</code> because the name can no longer be 
automatically deduced from the name of our action/method (by default,
FormFu would look for a file named <code>books/formfu_edit.yml</code>).

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452196#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#135" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li class="star">







    <div class="para">
    <a name="137"></a>
    <div class="content"><p>We load the book object from the stash (found using the $id passed to 
the Chained object method)

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452198#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#137" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li class="star">







    <div class="para">
    <a name="139"></a>
    <div class="content"><p>We use <code>$id</code> to look up the existing book from the database.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452200#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#139" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li class="star">







    <div class="para">
    <a name="141"></a>
    <div class="content"><p>We make sure the book lookup returned a valid book.  If not, we set 
the error message and return to the book list.
 
</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452202#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#141" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li class="star">







    <div class="para">
    <a name="143"></a>
    <div class="content"><p>If the form has been submitted and passes validation, we skip creating a 
new book and just use <code>$form-&gt;model-&gt;update</code> to update the existing 
book.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452204#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#143" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li class="star">







    <div class="para">
    <a name="145"></a>
    <div class="content"><p>If the form is being displayed for the first time (or has failed 
validation and it being redisplayed), we use
 <code>$form-&gt;model-&gt;default_values</code> to populate the form with data from the
database.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452206#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#145" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    </ul>








    <div class="para">
    <a name="147"></a>
    <div class="content"><p>Then, edit <code>root/src/books/list.tt2</code> and add a new link below the 
existing "Delete" link that allows us to edit/update each existing book. 
The last &lt;td&gt; cell in the book list table should look like the 
following:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452208#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#147" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="148"></a>
    <div class="content"><div><pre>    ...
    &lt;td&gt;
      [% # Add a link to delete a book %]
      &lt;a href="[% c.uri_for(c.controller.action_for('delete'), [book.id]
<span class="line_cont">+</span>) %]"&gt;Delete&lt;/a&gt;
      [% # Add a link to edit a book %]
      &lt;a href="[% c.uri_for(c.controller.action_for('formfu_edit'), [boo
<span class="line_cont">+</span>k.id]) %]"&gt;Edit&lt;/a&gt;
    &lt;/td&gt;
    ...

</pre>
</div></div>


    <div class="noteblock">
    
         
        
            




<div class="note sim_80" id="note_2148">
<div class="note_header">
    <div class="note_data">
        <a href="/user/jarich">jarich</a> 
    (2008-11-27 13:23:10)
    <a class="button u_566" href="/e/?mode=edit;notepos=32435#noteform">[edit]</a>
    <a class="button u_566" href="/e/?mode=move;notepos=32435#148">[move]</a>
    </div>
    <div class="note_nav">
    <a href="#note_2147" title="Previous note">«</a>
    <a href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#note_2148" title="Bookmarkable link to this note">§</a>
    
    </div>
</div> <!-- note_header -->
<div class="note_body">
        
    <p>In the older tutorials, the delete link looked like:</p>
<pre>  [% c.uri_for('delete/') _ book.id) %]</pre>

</div>
</div> <!-- note -->



        
    

    
        <a href="/e/?mode=create;section=25452209#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#148" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="149"></a>
    <div class="content"><p><b>Note:</b> Only add two lines (the "Add a link to edit a book" comment
and the href for <code>formfu_edit</code>).  Make sure you add it below the
existing <code>delete</code> link.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452210#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#149" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h4><a name="try_out_the_edit%2fupdate_feature"></a>Try Out the Edit/Update Feature

</h4>








    <div class="para">
    <a name="152"></a>
    <div class="content"><p>Press <code>Ctrl-C</code> to kill the previous server instance (if it's still 
running) and restart it:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452212#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#152" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="153"></a>
    <div class="content"><div><pre>    $ script/myapp_server.pl

</pre>
</div></div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452213#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#153" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="154"></a>
    <div class="content"><p>Make sure you are still logged in as <code>test01</code> and go to the 
<a href="http://localhost:3000/books/list">http://localhost:3000/books/list</a> URL in your browser.  Click the 
"Edit" link next to "Internetworking with TCP/IP Vol. II", change the 
rating to a 3, the "II" at end of the title to the number "2", add 
Stevens as a co-author (control-click), and click Submit.  You will then 
be returned to the book list with a "Book edited" message at the top in 
green.  Experiment with other edits to various books.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452214#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#154" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h4><a name="more_things_to_try"></a>More Things to Try

</h4>








    <div class="para">
    <a name="157"></a>
    <div class="content"><p>You are now armed with enough knowledge to be dangerous.  You can keep
tweaking the example application; some things you might want to do:

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452216#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#157" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <ul>








    <li class="star">







    <div class="para">
    <a name="160"></a>
    <div class="content"><p>Add an appropriate authorization check to the new Edit function.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452219#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#160" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li class="star">







    <div class="para">
    <a name="162"></a>
    <div class="content"><p>Cleanup the List page so that the Login link only displays when the user
isn't logged in and the Logout link only displays when a user is logged
in.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452221#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#162" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li class="star">







    <div class="para">
    <a name="164"></a>
    <div class="content"><p>Add a more sensible policy for when and how users and admins can do
things in the CRUD cycle.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452223#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#164" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <li class="star">







    <div class="para">
    <a name="166"></a>
    <div class="content"><p>Support the CRUD cycle for authors.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452225#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#166" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    </ul>








    <div class="para">
    <a name="168"></a>
    <div class="content"><p>Or you can proceed to write your own application, which is probably the
real reason you worked through this Tutorial in the first place.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452227#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#168" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h4><a name="config%3a%3ageneral_config_for_this_tutorial"></a>Config::General Config for this tutorial

</h4>








    <div class="para">
    <a name="171"></a>
    <div class="content"><p>If you are having difficulty with YAML config above, please save the
below into the file <code>formfu_create.conf</code> and delete the
<code>formfu_create.yml</code> file.  The below is in
<a href="/perldoc?Config::General">Config::General</a> format which follows the syntax of
Apache config files.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452229#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#171" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="172"></a>
    <div class="content"><div><pre>   constraints   Required
   &lt;elements&gt;
       &lt;constraints&gt;
           min   5
           max   40
           type   Length
           message   Length must be between 5 and 40 characters
       &lt;/constraints&gt;
       filter   TrimEdges
       filter   HTMLEscape
       name   title
       type   Text
       label   Title
       &lt;attributes&gt;
           title   Enter a book title here
       &lt;/attributes&gt;
   &lt;/elements&gt;
   &lt;elements&gt;
       constraints   Integer
       filter   TrimEdges
       filter   NonNumeric
       name   rating
       type   Text
       label   Rating
       &lt;attributes&gt;
           title   Enter a rating between 1 and 5 here
       &lt;/attributes&gt;
   &lt;/elements&gt;
   &lt;elements&gt;
       constraints   Integer
       filter   TrimEdges
       filter   HTMLEscape
       name   authors
       type   Select
       label   Author
       multiple   1
       size   3
   &lt;/elements&gt;
   &lt;elements&gt;
       value   Submit
       name   submit
       type   Submit
   &lt;/elements&gt;
   indicator   submit
   
</pre>
</div></div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452230#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#172" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <h3><a name="author"></a>AUTHOR

</h3>








    <div class="para">
    <a name="175"></a>
    <div class="content"><p>Kennedy Clark, <code>hkclark@gmail.com</code>

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452232#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#175" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="176"></a>
    <div class="content"><p>Please report any errors, issues or suggestions to the author.  The
most recent version of the Catalyst Tutorial can be found at
<a href="http://dev.catalyst.perl.org/repos/Catalyst/Catalyst-Manual/5.70/trunk/lib/Catalyst/Manual/Tutorial/">http://dev.catalyst.perl.org/repos/Catalyst/Catalyst-Manual/5.70/trunk/lib/Catalyst/Manual/Tutorial/</a>.

</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452233#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#176" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->








    <div class="para">
    <a name="177"></a>
    <div class="content"><p>Copyright 2006-2008, Kennedy Clark, under Creative Commons License
(<a href="http://creativecommons.org/licenses/by-sa/3.0/us/">http://creativecommons.org/licenses/by-sa/3.0/us/</a>).    
</p>
</div>


    <div class="noteblock">
    

    
        <a href="/e/?mode=create;section=25452234#noteform" class="cb"><img src="/img/note.gif" alt="New Note" title="Create note"></a>
    <a class="purple" href="    /~HKCLARK/Catalyst-Manual-5.7021/lib/Catalyst/Manual/Tutorial/AdvancedCRUD/FormFu.pod#177" title="Bookmarkable link to this paragraph">§</a>
    
    </div> <!-- noteblock -->
    </div> <!-- para -->






<p class="firstnote">(6 notes; <a href="#note_2148" title="Last note">[last note]</a>)</p>


</div> <!-- pod2html -->

<script type="text/javascript" src="http://annocpan.oostendorp.net/perlmonkpivot.cgi?module=Catalyst::Manual::Tutorial::AdvancedCRUD::FormFu"></script>


<script type="text/javascript">
<!--
var el = document.createElement('div');
el.innerHTML = '<form action="/#" method="post" id="noteform" class="note hidden">    <a name="noteform"></a>    <input type="hidden" name="section" value="" />    <input type="hidden" name="notepos" value="" />    <div class="note_header">Edit note     <a href="/note_help" target="_blank" id="note_help_link">[help]</a>    </div>    <div id="note_text"><textarea name="note_text" rows="5" cols="20"></textarea></div>    <div id="note_buttons">    <button name="mode" value="save" id="save_button" title="Save note. The same text will apply to all versions of this document">Save</button>        <span id="edit_buttons">    <button name="mode" value="delete" id="del_button" title="This will delete the note from all versions of this document">Delete</button>    <button name="mode" value="hide" id="hide_button" title="This will hide this note for this version of this document only">Hide</button>    </span>        </div></form>';
document.getElementById('nav').appendChild(el);

var el2 = document.createElement('div');
el2.id = 'plswait';
el2.style.display = 'none';
el2.innerHTML = 'Saving note... please wait';
document.getElementById('nav').appendChild(el2);
// -->
</script>
<!-- podver=456477 -->
</div> <!-- content -->
<div id="footer">

<a href="http://pair.com/"><img class="sponsor" src="/img/pair.png" alt=""></a>

<span class="sponsor">Server and bandwidth generously donated 
by <a href="http://pair.com/">pair Networks</a></span> 

<a href="/policy">Site policies</a> 
| <a href="/contact">Contact</a>
| <strong><a
href="http://rt.cpan.org/NoAuth/Bugs.html?Dist=AnnoCPAN">Bugs & Features</a></strong>

</div>
</body>
</html>


